---
import Button from "../components/Button.astro";
import Card from "../components/Card.astro";
import Layout from "../layouts/Layout.astro";

const tools = [
  {
    name: "Username Generator",
    icon: "ğŸ‘¤",
    path: "/username-generator",
    desc: "Create unique identifiers for any platform.",
    category: "Identity",
  },
  {
    name: "Password Generator",
    icon: "ğŸ”",
    path: "/password-generator",
    desc: "Generate secure, uncrackable passwords.",
    category: "Security",
  },
  {
    name: "Lottery Generator",
    icon: "ğŸ°",
    path: "/lottery-generator",
    desc: "Test your luck with random numbers.",
    category: "Fun",
  },
  {
    name: "Coin & Dice",
    icon: "ğŸ²",
    path: "/coin-dice",
    desc: "Flip a coin or roll the dice instantly.",
    category: "Fun",
  },
  {
    name: "Food Picker",
    icon: "ğŸ”",
    path: "/food-picker",
    desc: "Can't decide? Let fate choose your meal.",
    category: "Life",
  },
  {
    name: "Currency Converter",
    icon: "ğŸ’±",
    path: "/currency-converter",
    desc: "Real-time exchange rates at a glance.",
    category: "Utility",
  },
  {
    name: "Measure Converter",
    icon: "ğŸ“",
    path: "/measurement-converter",
    desc: "Convert units of measurement easily.",
    category: "Utility",
  },
  {
    name: "Habit Tracker",
    icon: "ğŸ“ˆ",
    path: "/habit-tracker",
    desc: "Build better habits and track progress.",
    category: "Productivity",
  },
  {
    name: "Focus Noise",
    icon: "ğŸ§",
    path: "/focus-noise",
    desc: "Ambient sounds to improve concentration.",
    category: "Productivity",
  },
  {
    name: "ASCII Art",
    icon: "ğŸ¨",
    path: "/ascii-art",
    desc: "Turn text into beautiful ASCII masterpieces.",
    category: "Creative",
  },
  {
    name: "Meme Generator",
    icon: "ğŸ¸",
    path: "/meme-generator",
    desc: "Create viral memes in seconds.",
    category: "Creative",
  },
  {
    name: "Hangman",
    icon: "ğŸ˜µ",
    path: "/hangman",
    desc: "Classic word guessing game.",
    category: "Game",
  },
  {
    name: "Hash Generator",
    icon: "##",
    path: "/hash-generator",
    desc: "Create cryptographic hashes (MD5, SHA).",
    category: "Security",
  },
  {
    name: "Base64 Tool",
    icon: "64",
    path: "/base64-tool",
    desc: "Encode and decode Base64 strings.",
    category: "Dev",
  },
];
---

<Layout title="Discovery Hub">
  <div class="relative min-h-screen pb-12">
    <!-- Background Decor -->
    <div
      class="fixed top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none"
    >
      <div
        class="absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-blue-600/10 rounded-full blur-[120px] animate-pulse"
      >
      </div>
      <div
        class="absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-violet-600/10 rounded-full blur-[120px] animate-pulse"
        style="animation-delay: 2s;"
      >
      </div>
    </div>

    <div class="container mx-auto px-4 pt-16 pb-8">
      <!-- Hero Section -->
      <div class="text-center mb-16 max-w-3xl mx-auto relative z-10">
        <div
          class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-sm text-blue-300 mb-6 backdrop-blur-sm animate-float"
        >
          <span class="flex h-2 w-2 relative">
            <span
              class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"
            ></span>
            <span class="relative inline-flex rounded-full h-2 w-2 bg-blue-500"
            ></span>
          </span>
          Explore the Collection
        </div>

        <!-- Bug Smasher Button -->
        <button
          id="start-debug"
          class="absolute top-0 right-0 md:right-[-120px] bg-red-500/10 hover:bg-red-500/20 text-red-400 px-3 py-1 rounded-full text-xs font-mono border border-red-500/20 transition-all opacity-50 hover:opacity-100"
          title="Found a bug? Smash it!"
        >
          ğŸª² Debug Mode
        </button>

        <!-- Bug Container -->
        <div
          id="bug-container"
          class="fixed inset-0 pointer-events-none z-50 overflow-hidden hidden"
        >
        </div>

        <h1
          class="text-6xl md:text-7xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-indigo-400 to-violet-400 mb-6 pb-2 tracking-tight drop-shadow-sm"
        >
          Tools & Stuff
        </h1>
        <p class="text-xl text-slate-400 mb-10 leading-relaxed">
          A premium suite of developer utilities and lifestyle tools. <br
            class="hidden md:block"
          />
          Beautifully designed, open source, and free to use.
        </p>

        <!-- Search Bar -->
        <div class="max-w-xl mx-auto relative group">
          <div
            class="absolute inset-0 bg-gradient-to-r from-blue-500 to-violet-500 rounded-2xl blur opacity-25 group-hover:opacity-50 transition-opacity duration-300"
          >
          </div>
          <div
            class="relative flex items-center bg-slate-900/80 backdrop-blur-md rounded-2xl border border-white/10 shadow-2xl overflow-hidden focus-within:border-blue-500/50 transition-colors"
          >
            <span class="pl-6 text-slate-400 text-xl">ğŸ”</span>
            <input
              type="text"
              id="tool-search"
              placeholder="Find a tool..."
              class="w-full bg-transparent border-none px-4 py-4 text-lg text-white placeholder-slate-500 focus:ring-0 outline-none"
            />
            <div class="pr-2">
              <span
                class="px-2 py-1 rounded-md bg-white/5 text-xs text-slate-500 font-mono border border-white/5"
                >/</span
              >
            </div>
          </div>
        </div>
      </div>

      <!-- Categories System (Optional Future) -->
      <!-- <div class="flex gap-2 justify-center mb-12 flex-wrap" id="categories">
        {['All', 'Dev', 'Security', 'Fun', 'Productivity'].map(cat => (
          <button class="px-4 py-1.5 rounded-full bg-white/5 hover:bg-white/10 border border-white/5 text-sm text-slate-300 transition-colors">
            {cat}
          </button>
        ))}
      </div> -->

      <!-- Tools Grid -->
      <div
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
        id="tools-grid"
      >
        {
          tools.map((tool) => (
            <Card
              href={tool.path}
              class="group h-full flex flex-col tool-card"
              data-name={tool.name}
              data-category={tool.category}
            >
              <div class="flex items-start justify-between mb-4">
                <div class="w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-500/10 to-violet-500/10 flex items-center justify-center text-3xl group-hover:scale-110 group-hover:rotate-3 transition-transform duration-300 border border-white/5 shadow-inner">
                  {tool.icon}
                </div>
                <div class="px-2 py-1 rounded-md bg-white/5 text-[10px] uppercase tracking-wider font-semibold text-slate-400 border border-white/5">
                  {tool.category}
                </div>
              </div>

              <h2 class="text-2xl font-bold mb-2 text-white group-hover:text-blue-300 transition-colors">
                {tool.name}
              </h2>
              <p class="text-slate-400 leading-relaxed flex-1">{tool.desc}</p>

              <div class="mt-6 flex items-center text-sm font-medium text-blue-400 opacity-0 group-hover:opacity-100 transition-all duration-300 translate-y-2 group-hover:translate-y-0">
                Launch Tool{" "}
                <span class="ml-1 transition-transform group-hover:translate-x-1">
                  â†’
                </span>
              </div>
            </Card>
          ))
        }
      </div>

      <!-- Footer CTA -->
      <div class="mt-24 text-center">
        <div
          class="inline-block p-[2px] rounded-2xl bg-gradient-to-r from-blue-500/50 via-violet-500/50 to-fuchsia-500/50"
        >
          <div class="bg-black/80 rounded-2xl p-8 backdrop-blur-xl max-w-2xl">
            <h3 class="text-2xl font-bold mb-4 text-white">
              Missing something?
            </h3>
            <p class="text-slate-400 mb-6">
              Have an idea for a cool tool? Contribute to the project on GitHub.
            </p>
            <Button
              variant="secondary"
              href="https://github.com/corey-burns/tools-n-stuff"
            >
              <span class="mr-2">â­</span> Star on GitHub
            </Button>
          </div>
        </div>
      </div>
    </div>
  </div>
</Layout>

<script>
  // Simple search functionality
  const searchInput = document.getElementById(
    "tool-search",
  ) as HTMLInputElement;
  const toolsGrid = document.getElementById("tools-grid");
  const cards = toolsGrid?.querySelectorAll(".tool-card");

  if (searchInput && cards) {
    searchInput.addEventListener("input", (e) => {
      const term = (e.target as HTMLInputElement).value.toLowerCase();

      cards.forEach((card) => {
        const name = card.getAttribute("data-name")?.toLowerCase() || "";
        const category =
          card.getAttribute("data-category")?.toLowerCase() || "";

        if (name.includes(term) || category.includes(term)) {
          (card as HTMLElement).style.display = "flex";
        } else {
          (card as HTMLElement).style.display = "none";
        }
      });
    });

    // Slash key focus
    document.addEventListener("keydown", (e) => {
      if (e.key === "/" && document.activeElement !== searchInput) {
        e.preventDefault();
        searchInput.focus();
      }
    });
  }
  // Bug Smasher Game
  const startDebugBtn = document.getElementById("start-debug");
  const bugContainer = document.getElementById("bug-container");
  let score = 0;
  let gameActive = false;

  if (startDebugBtn && bugContainer) {
    startDebugBtn.addEventListener("click", () => {
      if (gameActive) return;
      gameActive = true;
      score = 0;
      bugContainer.classList.remove("hidden");
      startDebugBtn.textContent = "Debugging... Score: 0";
      startDebugBtn.classList.add("bg-red-500", "text-white");

      const spawnInterval = setInterval(spawnBug, 800);

      // Auto-stop after 30 seconds
      setTimeout(() => {
        clearInterval(spawnInterval);
        gameActive = false;
        alert(`Debugging Complete! You squashed ${score} bugs! ğŸ›`);
        bugContainer.innerHTML = "";
        bugContainer.classList.add("hidden");
        startDebugBtn.textContent = "ğŸª² Debug Mode";
        startDebugBtn.classList.remove("bg-red-500", "text-white");
      }, 30000);
    });

    function spawnBug() {
      if (!gameActive) return;

      const bug = document.createElement("div");
      bug.textContent = "ğŸª²";
      bug.style.position = "absolute";
      bug.style.fontSize = "24px";
      bug.style.cursor = "pointer";
      bug.style.pointerEvents = "auto";
      bug.style.userSelect = "none";
      bug.style.transition = "transform 0.1s";

      // Random start position (left or right)
      const startSide = Math.random() > 0.5 ? "left" : "right";
      const startY = Math.random() * (window.innerHeight - 100) + 50;

      bug.style.top = `${startY}px`;
      bug.style[startSide] = "-50px";

      bugContainer?.appendChild(bug);

      // Animate movement
      let pos = -50;
      const speed = Math.random() * 3 + 2;
      const wobble = Math.random() * 50;

      const moveInterval = setInterval(() => {
        if (!gameActive) return clearInterval(moveInterval);

        pos += speed;
        bug.style[startSide] = `${pos}px`;
        bug.style.transform = `translateY(${Math.sin(pos / 50) * wobble}px) rotate(${startSide === "left" ? 90 : -90}deg)`;

        if (pos > window.innerWidth) {
          clearInterval(moveInterval);
          bug.remove();
        }
      }, 20);

      // Click handler
      bug.addEventListener("click", () => {
        score++;
        if (startDebugBtn)
          startDebugBtn.textContent = `Debugging... Score: ${score}`;

        // Splat effect
        clearInterval(moveInterval);
        bug.textContent = "ğŸ’¥";
        bug.style.transform = "scale(1.5)";
        setTimeout(() => bug.remove(), 500);
      });
    }
  }
</script>
