---
import Button from "../components/Button.astro";
import Layout from "../layouts/Layout.astro";
---

<Layout title="Username Generator">
  <div class="container mx-auto px-4 py-12 max-w-4xl">
    <div class="text-center mb-12 animate-float">
      <div
        class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-violet-500 text-4xl shadow-lg shadow-blue-500/30 mb-6"
      >
        ðŸ‘¤
      </div>
      <h1
        class="text-5xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-violet-400 to-fuchsia-400"
      >
        Username Generator
      </h1>
      <p class="text-xl text-slate-400">
        Create unique, aesthetic, and professional identities in seconds.
      </p>
    </div>

    <!-- Generator Interface -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-start">
      <!-- Controls -->
      <div class="lg:col-span-1 space-y-6">
        <div class="card-glass relative z-10">
          <h2 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
            <span class="text-blue-400">01.</span> Configuration
          </h2>

          <div class="space-y-4">
            <div>
              <label
                for="base-word"
                class="block text-sm font-medium text-slate-400 mb-2"
                >Base Word (Optional)</label
              >
              <input
                type="text"
                id="base-word"
                placeholder="e.g. Dragon"
                class="w-full bg-slate-900/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-slate-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all"
              />
            </div>

            <div>
              <label class="block text-sm font-medium text-slate-400 mb-2"
                >Category</label
              >
              <div class="grid grid-cols-2 gap-2">
                <button
                  class="category-btn active px-3 py-2 rounded-lg bg-blue-600/20 border border-blue-500/30 text-blue-300 text-sm font-medium hover:bg-blue-600/30 transition-all"
                  data-category="all"
                >
                  All
                </button>
                <button
                  class="category-btn px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-slate-400 text-sm font-medium hover:bg-white/10 transition-all"
                  data-category="gaming"
                >
                  Gaming
                </button>
                <button
                  class="category-btn px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-slate-400 text-sm font-medium hover:bg-white/10 transition-all"
                  data-category="aesthetic"
                >
                  Aesthetic
                </button>
                <button
                  class="category-btn px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-slate-400 text-sm font-medium hover:bg-white/10 transition-all"
                  data-category="funny"
                >
                  Funny
                </button>
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium text-slate-400 mb-2"
                >Options</label
              >
              <label
                class="flex items-center gap-3 p-3 rounded-lg bg-white/5 border border-white/10 cursor-pointer hover:bg-white/10 transition-all"
              >
                <input
                  type="checkbox"
                  id="use-numbers"
                  checked
                  class="w-4 h-4 rounded border-slate-600 text-blue-500 focus:ring-blue-500 bg-slate-800"
                />
                <span class="text-sm text-slate-300">Include Numbers</span>
              </label>
            </div>

            <Button id="generate-btn" class="w-full mt-4" variant="primary">
              <span class="mr-2">âš¡</span> Generate
            </Button>
          </div>
        </div>
      </div>

      <!-- Results -->
      <div class="lg:col-span-2">
        <div class="card-glass min-h-[500px] flex flex-col">
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-lg font-bold text-white flex items-center gap-2">
              <span class="text-violet-400">02.</span> Your Identities
            </h2>
            <div
              class="text-xs text-slate-500 font-mono bg-white/5 px-2 py-1 rounded"
            >
              Click to copy
            </div>
          </div>

          <div
            id="results-grid"
            class="grid grid-cols-1 sm:grid-cols-2 gap-3 content-start flex-1"
          >
            <!-- Results will be injected here -->
            <div
              class="sm:col-span-2 flex flex-col items-center justify-center text-slate-600 py-20"
            >
              <div class="text-4xl mb-4 opacity-50">ðŸ‘¤</div>
              <p>Ready to generate awesome usernames</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</Layout>

<script>
  // Generator Logic
  const adjectives = [
    "Cyber",
    "Neon",
    "Techno",
    "Shadow",
    "Solar",
    "Lunar",
    "Cosmic",
    "Pixel",
    "Glitch",
    "Retro",
    "Hyper",
    "Mega",
    "Ultra",
    "Super",
    "Quantum",
    "Astro",
    "Turbo",
    "Rapid",
    "Sonic",
    "Vapor",
    "Dark",
    "Light",
    "Frost",
    "Iron",
    "Steel",
    "Titan",
    "Ghost",
    "Phantom",
    "Spirit",
    "Soul",
    "Magic",
    "Mystic",
    "Crystal",
    "Diamond",
    "Ruby",
    "Emerald",
    "Sapphire",
    "Golden",
    "Silver",
    "Bronze",
    "Happy",
    "Sad",
    "Angry",
    "Calm",
    "Chill",
    "Wild",
    "Crazy",
    "Mad",
    "Bad",
    "Good",
  ];

  const nouns = [
    "Wolf",
    "Tiger",
    "Lion",
    "Bear",
    "Eagle",
    "Hawk",
    "Falcon",
    "Shark",
    "Whale",
    "Dolphin",
    "Dragon",
    "Phoenix",
    "Griffin",
    "Unicorn",
    "Hydra",
    "Kraken",
    "Titan",
    "Giant",
    "Golem",
    "Robot",
    "Ninja",
    "Samurai",
    "Knight",
    "Wizard",
    "Mage",
    "Warlock",
    "Witch",
    "Sorcerer",
    "Rogue",
    "Hunter",
    "Pilot",
    "Driver",
    "Racer",
    "Gamer",
    "Player",
    "User",
    "Admin",
    "Root",
    "System",
    "Network",
    "Star",
    "Planet",
    "Moon",
    "Sun",
    "Comet",
    "Meteor",
    "Galaxy",
    "Universe",
    "World",
    "Dimension",
  ];

  const prefixes = [
    "The",
    "Mr",
    "Mrs",
    "Ms",
    "Dr",
    "Sir",
    "Lord",
    "Lady",
    "Captain",
    "Commander",
    "iAm",
    "Just",
    "Real",
    "Official",
  ];
  const suffixes = [
    "X",
    "007",
    "99",
    "TV",
    "YT",
    "Live",
    "Pro",
    "God",
    "King",
    "Queen",
    "Master",
    "Zero",
    "One",
  ];

  const categoryData = {
    gaming: [
      "Noob",
      "Pro",
      "Tryhard",
      "Sweat",
      "Carry",
      "Tank",
      "Healer",
      "DPS",
      "Sniper",
      "Camper",
    ],
    aesthetic: [
      "Lofi",
      "Vibe",
      "Dream",
      "Cloud",
      "Soft",
      "Cute",
      "Kawaii",
      "Angel",
      "Devil",
      "Demon",
    ],
    funny: [
      "Potato",
      "Toilet",
      "Trash",
      "Garbage",
      "Dumpster",
      "Muffin",
      "Cookie",
      "Biscuit",
      "Bread",
      "Toast",
    ],
  };

  function generateUsernames(
    count = 12,
    baseWord = "",
    category = "all",
    useNumbers = true,
  ) {
    const results: string[] = [];

    for (let i = 0; i < count; i++) {
      let name = "";
      const r = Math.random();

      // Select random components
      const getRand = (arr) => arr[Math.floor(Math.random() * arr.length)];

      let adj = getRand(adjectives);
      let noun = getRand(nouns);

      if (
        category !== "all" &&
        categoryData[category as keyof typeof categoryData]
      ) {
        if (r > 0.5)
          noun = getRand(categoryData[category as keyof typeof categoryData]);
        else adj = getRand(categoryData[category as keyof typeof categoryData]);
      }

      // Generation patterns
      if (baseWord) {
        if (r < 0.33) name = adj + baseWord;
        else if (r < 0.66) name = baseWord + noun;
        else name = baseWord + getRand(suffixes);
      } else {
        if (r < 0.4) name = adj + noun;
        else if (r < 0.7) name = getRand(prefixes) + noun;
        else name = noun + getRand(suffixes);
      }

      // Add numbers
      if (useNumbers && Math.random() > 0.5) {
        name += Math.floor(Math.random() * 1000);
      }

      // Formatting
      name = name.replace(/\s/g, "");
      results.push(name);
    }

    return results;
  }

  // UI Interaction
  const generateBtn = document.getElementById("generate-btn");
  const resultsGrid = document.getElementById("results-grid");
  const baseWordInput = document.getElementById(
    "base-word",
  ) as HTMLInputElement;
  const numbersCheckbox = document.getElementById(
    "use-numbers",
  ) as HTMLInputElement;
  const categoryBtns = document.querySelectorAll(".category-btn");

  let currentCategory = "all";

  // Category Selection
  categoryBtns.forEach((btn) => {
    btn.addEventListener("click", () => {
      // Remove active class from all
      categoryBtns.forEach((b) => {
        b.classList.remove(
          "bg-blue-600/20",
          "border-blue-500/30",
          "text-blue-300",
        );
        b.classList.add("bg-white/5", "border-white/10", "text-slate-400");
      });

      // Add active to clicked
      btn.classList.remove("bg-white/5", "border-white/10", "text-slate-400");
      btn.classList.add(
        "bg-blue-600/20",
        "border-blue-500/30",
        "text-blue-300",
      );

      currentCategory = btn.getAttribute("data-category") || "all";
    });
  });

  // Generate Action
  function runGeneration() {
    const base = baseWordInput.value.trim();
    const useNum = numbersCheckbox.checked;

    const names = generateUsernames(18, base, currentCategory, useNum);

    if (resultsGrid) {
      resultsGrid.innerHTML = "";
      names.forEach((name, index) => {
        const div = document.createElement("div");
        div.className =
          "group flex items-center justify-between p-4 rounded-xl bg-white/5 border border-white/5 hover:bg-white/10 hover:border-blue-500/30 transition-all cursor-pointer animate-in fade-in zoom-in duration-300";
        div.style.animationDelay = `${index * 50}ms`;

        div.innerHTML = `
          <span class="font-mono text-lg font-medium text-slate-200 group-hover:text-blue-300 transition-colors select-all">${name}</span>
          <span class="opacity-0 group-hover:opacity-100 text-xs text-blue-400 font-bold transition-opacity">COPY</span>
        `;

        div.onclick = () => {
          navigator.clipboard.writeText(name);

          // Toast Feedback (Localized)
          const span = div.querySelector("span:last-child");
          if (span) {
            const originalText = span.textContent;
            span.textContent = "COPIED!";
            span.classList.add("text-green-400");
            setTimeout(() => {
              span.textContent = originalText;
              span.classList.remove("text-green-400");
            }, 1000);
          }
        };

        resultsGrid.appendChild(div);
      });
    }
  }

  generateBtn?.addEventListener("click", runGeneration);

  // Initial Run
  // setTimeout(runGeneration, 500);
</script>
