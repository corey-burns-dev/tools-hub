---
type Variant = "primary" | "secondary" | "ghost" | "danger";
type Size = "sm" | "md" | "lg";

interface Props {
  as?: "button" | "a";
  href?: string;
  type?: "button" | "submit" | "reset";
  variant?: Variant;
  size?: Size;
  class?: string;
  [key: string]: any;
}

const {
  as = "button",
  href,
  type = "button",
  variant = "primary" as Variant,
  size = "md" as Size,
  class: className = "",
  ...rest
} = Astro.props as Props;

const base =
  "inline-flex items-center justify-center gap-1.5 rounded-lg font-semibold tracking-wide " +
  "transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500/50 " +
  "disabled:opacity-40 disabled:pointer-events-none select-none cursor-pointer text-center whitespace-nowrap " +
  "active:scale-[0.97] relative overflow-hidden";

const sizes: Record<Size, string> = {
  sm: "px-2.5 py-1 text-[0.75rem]",
  md: "px-3.5 py-1.5 text-[0.8rem]",
  lg: "px-5 py-2.5 text-sm",
};

const variants: Record<Variant, string> = {
  primary:
    "bg-indigo-600 text-white shadow-md shadow-indigo-500/15 hover:bg-indigo-500 hover:shadow-lg hover:shadow-indigo-500/25",
  secondary:
    "bg-white/[0.05] text-white/90 border border-white/[0.08] hover:bg-white/[0.08] hover:border-white/[0.12] backdrop-blur-sm",
  ghost: "bg-transparent text-slate-400 hover:bg-white/[0.04] hover:text-white/80",
  danger:
    "bg-rose-600/90 text-white shadow-md shadow-rose-500/15 hover:bg-rose-500 hover:shadow-lg hover:shadow-rose-500/25",
};

const cls = `${base} ${sizes[size]} ${variants[variant]} ${className}`.trim();
const Tag = as;
---

{
  Tag === "a" ? (
    <a href={href} class={cls} {...rest}>
      <slot />
    </a>
  ) : (
    <button type={type as "button" | "submit" | "reset"} class={cls} {...rest}>
      <slot />
    </button>
  )
}
