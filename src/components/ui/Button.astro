---
type Variant = "primary" | "secondary" | "ghost" | "danger";
type Size = "sm" | "md" | "lg";

interface Props {
  as?: "button" | "a";
  href?: string;
  type?: "button" | "submit" | "reset";
  variant?: Variant;
  size?: Size;
  class?: string;
  [key: string]: any;
}

const {
  as = "button",
  href,
  type = "button",
  variant = "primary" as Variant,
  size = "md" as Size,
  class: className = "",
  ...rest
} = Astro.props as Props;

const base =
  "inline-flex items-center justify-center gap-2 rounded-lg font-medium " +
  "transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950 " +
  "disabled:opacity-50 disabled:pointer-events-none select-none cursor-pointer text-center whitespace-nowrap";

const sizes: Record<Size, string> = {
  sm: "min-h-9 px-3 text-sm",
  md: "min-h-10 px-4 text-sm",
  lg: "min-h-11 px-5 text-base",
};

const variants: Record<Variant, string> = {
  primary: "border border-blue-500 bg-blue-600 text-white hover:bg-blue-500 active:bg-blue-700",
  secondary:
    "border border-slate-600 bg-slate-900 text-slate-100 hover:border-slate-500 hover:bg-slate-800",
  ghost: "border border-transparent text-slate-300 hover:border-slate-700 hover:bg-slate-900",
  danger: "border border-rose-500 bg-rose-600 text-white hover:bg-rose-500 active:bg-rose-700",
};

const cls = `${base} ${sizes[size]} ${variants[variant]} ${className}`.trim();
const Tag = as;
---

{
  Tag === "a" ? (
    <a href={href} class={cls} {...rest}>
      <slot />
    </a>
  ) : (
    <button type={type as "button" | "submit" | "reset"} class={cls} {...rest}>
      <slot />
    </button>
  )
}
